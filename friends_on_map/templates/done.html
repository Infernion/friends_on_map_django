{% extends "base.html" %}
{% load url from future %}

{% block sidebar %}
<p>You are logged in as {{ user.username }}!</p>
<img class="thumbnail" src="{{ user_model.user_info[0].photo }}" alt="">
<p>Name: {{ user_model.name }}</p>
 {% if backends.associated %}
<p>Associated:</p>
<ul>
  {% for assoc in backends.associated %}
    <li>
      {{ assoc.provider }} (<a href="{% url 'social:disconnect_individual' assoc.provider assoc.id %}" class="disconnect">Disconnect</a>)
    </li>
  {% endfor %}
</ul>
{% endif %}

{% if backends.not_associated %}
<p>Associate:</p>
<ul>
  {% for name in backends.not_associated %}
    <li>
      <a href="{% url 'social:begin' name %}">{{ name }}</a>
    </li>
  {% endfor %}
</ul>
{% endif %}

<div id="result"></div>
{% endblock %}

{% block head_scripts %}

<script type="text/javascript">
  var signInCallback = function (result) {
      if (result['error']) {
        alert('An error happened:', result['error']);
      } else {
        $('#code').attr('value', result['code']);
        $('#at').attr('value', result['access_token']);
        $('#google-plus').submit();
      }
  };
</script>
{% endblock %}
